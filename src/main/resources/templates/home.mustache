<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
{{>include/header}}
It's home
<!--<input type="text" id="token" value="{{_csrf.token}}" />-->
<form id="form1" action="/test2" method="POST">
    <input type="text" name="hah" value="anything"/>
</form>
<button type="button" id="btn">submit</button>
{{>include/footer}}
<script>
    document.addEventListener("DOMContentLoaded", () => {
        let button = document.getElementById("btn");
        let token = getCookie("XSRF-TOKEN");//document.getElementById("token").value;
        let form1 = document.getElementById("form1")

        button.addEventListener("click", () => {
            //console.log('token {}', token);
            form1.submit()
            /*fetch("/test2",
                    {
                        method : "POST",
                        headers : {
                            "X-XSRF-TOKEN" : token
                        }
                    });*/
        });
    });

    function getCookie(cookie_name) {
        var x, y;
        var val = document.cookie.split(';');
        for (var i = 0; i < val.length; i++) {
            x = val[i].substr(0, val[i].indexOf('='));
            y = val[i].substr(val[i].indexOf('=') + 1);
            x = x.replace(/^\s+|\s+$/g, '');
            // 앞과 뒤의 공백 제거하기
            if (x == cookie_name) {
                return unescape(y);
                // unescape로 디코딩 후 값 리턴
            }
        }
    }

</script>
</body>
</html>